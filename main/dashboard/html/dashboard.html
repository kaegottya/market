<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Market Overview - Dashboard</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="../css/dashboard.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.js"></script>
</head>
<body>
<!-- Background Animation -->
<div class="background-animation">
    <div class="floating-shape shape-1"></div>
    <div class="floating-shape shape-2"></div>
    <div class="floating-shape shape-3"></div>
    <div class="floating-shape shape-4"></div>
    <div class="floating-shape shape-5"></div>
</div>

<!-- Navigation Header -->
<nav class="navbar navbar-expand-lg navbar-dark fixed-top">
    <div class="container-fluid">
        <a class="navbar-brand" href="#">
            <i class="fas fa-chart-line me-2"></i>Market Overview
        </a>

        <!-- Dashboard Navigation -->
        <div class="navbar-nav me-auto">
            <a class="nav-link active" href="#" data-section="overview">
                <i class="fas fa-tachometer-alt me-1"></i>Overview
            </a>
            <a class="nav-link" href="#" data-section="portfolio">
                <i class="fas fa-briefcase me-1"></i>Portfolio
            </a>
            <a class="nav-link" href="#" data-section="watchlist">
                <i class="fas fa-eye me-1"></i>Watchlist
            </a>
            <a class="nav-link" href="#" data-section="news">
                <i class="fas fa-newspaper me-1"></i>News
            </a>
            <a class="nav-link" href="#" data-section="alerts">
                <i class="fas fa-bell me-1"></i>Alerts
            </a>
        </div>

        <!-- User Info & Actions -->
        <div class="navbar-nav">
            <div class="nav-item dropdown">
                <a class="nav-link dropdown-toggle user-dropdown" href="#" data-bs-toggle="dropdown">
                    <div class="user-avatar">
                        <i class="fas fa-user"></i>
                    </div>
                    <span class="user-name">Loading...</span>
                </a>
                <ul class="dropdown-menu dropdown-menu-end">
                    <li><a class="dropdown-item" href="#" data-bs-toggle="modal" data-bs-target="#profileModal">
                        <i class="fas fa-user-edit me-2"></i>Profile
                    </a></li>
                    <li><a class="dropdown-item" href="#" data-bs-toggle="modal" data-bs-target="#settingsModal">
                        <i class="fas fa-cog me-2"></i>Settings
                    </a></li>
                    <li><hr class="dropdown-divider"></li>
                    <li><a class="dropdown-item" href="#" id="logoutBtn">
                        <i class="fas fa-sign-out-alt me-2"></i>Logout
                    </a></li>
                </ul>
            </div>
        </div>
    </div>
</nav>

<!-- Main Dashboard Container -->
<div class="dashboard-container">
    <!-- Sidebar -->
    <div class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <h5><i class="fas fa-bolt me-2"></i>Quick Actions</h5>
        </div>

        <div class="sidebar-content">
            <!-- Quick Actions -->
            <div class="quick-actions">
                <button class="btn btn-quick-action" data-bs-toggle="modal" data-bs-target="#addStockModal">
                    <i class="fas fa-plus"></i>
                    <span>Add Stock</span>
                </button>
                <button class="btn btn-quick-action" data-bs-toggle="modal" data-bs-target="#addAlertModal">
                    <i class="fas fa-bell-plus"></i>
                    <span>Set Alert</span>
                </button>
                <button class="btn btn-quick-action" id="refreshDataBtn">
                    <i class="fas fa-sync"></i>
                    <span>Refresh</span>
                </button>
            </div>

            <!-- Recent Activity -->
            <div class="recent-activity">
                <h6><i class="fas fa-clock me-2"></i>Recent Activity</h6>
                <div class="activity-list" id="recentActivity">
                    <div class="activity-item">
                        <div class="activity-icon">
                            <i class="fas fa-plus text-success"></i>
                        </div>
                        <div class="activity-content">
                            <p>Added AAPL to watchlist</p>
                            <small>2 minutes ago</small>
                        </div>
                    </div>
                    <div class="activity-item">
                        <div class="activity-icon">
                            <i class="fas fa-bell text-warning"></i>
                        </div>
                        <div class="activity-content">
                            <p>Price alert triggered for TSLA</p>
                            <small>15 minutes ago</small>
                        </div>
                    </div>
                    <div class="activity-item">
                        <div class="activity-icon">
                            <i class="fas fa-chart-line text-info"></i>
                        </div>
                        <div class="activity-content">
                            <p>Portfolio updated</p>
                            <small>1 hour ago</small>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Market Status -->
            <div class="market-status">
                <h6><i class="fas fa-globe me-2"></i>Market Status</h6>
                <div class="status-item">
                    <span class="status-label">NYSE</span>
                    <span class="status-badge status-open">Open</span>
                </div>
                <div class="status-item">
                    <span class="status-label">NASDAQ</span>
                    <span class="status-badge status-open">Open</span>
                </div>
                <div class="status-item">
                    <span class="status-label">LSE</span>
                    <span class="status-badge status-closed">Closed</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Content Area -->
    <div class="main-content">
        <!-- Overview Section -->
        <div class="dashboard-section active" id="overview-section">
            <!-- Quick Stats Cards -->
            <div class="row mb-4">
                <div class="col-xl-3 col-md-6 mb-4">
                    <div class="stats-card">
                        <div class="card-body">
                            <div class="d-flex align-items-center">
                                <div class="stats-icon bg-primary">
                                    <i class="fas fa-wallet"></i>
                                </div>
                                <div class="stats-content">
                                    <h4 class="stats-value" id="portfolioValue">$0.00</h4>
                                    <p class="stats-label">Portfolio Value</p>
                                    <div class="stats-change positive">
                                        <i class="fas fa-arrow-up"></i>
                                        <span id="portfolioChange">+0.00%</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-xl-3 col-md-6 mb-4">
                    <div class="stats-card">
                        <div class="card-body">
                            <div class="d-flex align-items-center">
                                <div class="stats-icon bg-success">
                                    <i class="fas fa-chart-line"></i>
                                </div>
                                <div class="stats-content">
                                    <h4 class="stats-value" id="dayPL">$0.00</h4>
                                    <p class="stats-label">Day's P&L</p>
                                    <div class="stats-change positive">
                                        <i class="fas fa-arrow-up"></i>
                                        <span id="dayPLChange">+0.00%</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-xl-3 col-md-6 mb-4">
                    <div class="stats-card">
                        <div class="card-body">
                            <div class="d-flex align-items-center">
                                <div class="stats-icon bg-warning">
                                    <i class="fas fa-briefcase"></i>
                                </div>
                                <div class="stats-content">
                                    <h4 class="stats-value" id="activePositions">0</h4>
                                    <p class="stats-label">Active Positions</p>
                                    <div class="stats-change neutral">
                                        <span id="positionsChange">Holdings</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-xl-3 col-md-6 mb-4">
                    <div class="stats-card">
                        <div class="card-body">
                            <div class="d-flex align-items-center">
                                <div class="stats-icon bg-info">
                                    <i class="fas fa-eye"></i>
                                </div>
                                <div class="stats-content">
                                    <h4 class="stats-value" id="watchlistCount">0</h4>
                                    <p class="stats-label">Watchlist Items</p>
                                    <div class="stats-change neutral">
                                        <span id="watchlistChange">Tracked</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Charts Row -->
            <div class="row mb-4">
                <div class="col-xl-8 mb-4">
                    <div class="dashboard-card">
                        <div class="card-header">
                            <h5><i class="fas fa-chart-area me-2"></i>Portfolio Performance</h5>
                            <div class="card-actions">
                                <select class="form-select form-select-sm" id="chartTimeframe">
                                    <option value="1D">1D</option>
                                    <option value="5D">5D</option>
                                    <option value="1M" selected>1M</option>
                                    <option value="3M">3M</option>
                                    <option value="6M">6M</option>
                                    <option value="1Y">1Y</option>
                                </select>
                            </div>
                        </div>
                        <div class="card-body">
                            <canvas id="portfolioChart"></canvas>
                        </div>
                    </div>
                </div>

                <div class="col-xl-4 mb-4">
                    <div class="dashboard-card">
                        <div class="card-header">
                            <h5><i class="fas fa-chart-pie me-2"></i>Asset Allocation</h5>
                        </div>
                        <div class="card-body">
                            <canvas id="allocationChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Top Movers -->
            <div class="row">
                <div class="col-12">
                    <div class="dashboard-card">
                        <div class="card-header">
                            <h5><i class="fas fa-fire me-2"></i>Top Movers</h5>
                        </div>
                        <div class="card-body">
                            <div class="row">
                                <div class="col-md-4">
                                    <h6 class="text-success">Top Gainers</h6>
                                    <div class="movers-list" id="topGainers">
                                        <!-- Will be populated by JavaScript -->
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <h6 class="text-danger">Top Losers</h6>
                                    <div class="movers-list" id="topLosers">
                                        <!-- Will be populated by JavaScript -->
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <h6 class="text-primary">Most Active</h6>
                                    <div class="movers-list" id="mostActive">
                                        <!-- Will be populated by JavaScript -->
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Portfolio Section -->
        <div class="dashboard-section" id="portfolio-section">
            <div class="dashboard-card">
                <div class="card-header">
                    <h5><i class="fas fa-briefcase me-2"></i>Portfolio Holdings</h5>
                    <div class="card-actions">
                        <button class="btn btn-sm btn-outline-primary" data-bs-toggle="modal" data-bs-target="#addPositionModal">
                            <i class="fas fa-plus me-1"></i>Add Position
                        </button>
                    </div>
                </div>
                <div class="card-body">
                    <div class="table-responsive">
                        <table class="table table-hover" id="portfolioTable">
                            <thead>
                            <tr>
                                <th>Symbol</th>
                                <th>Company</th>
                                <th>Shares</th>
                                <th>Avg Cost</th>
                                <th>Current Price</th>
                                <th>Market Value</th>
                                <th>Gain/Loss</th>
                                <th>%</th>
                                <th>Actions</th>
                            </tr>
                            </thead>
                            <tbody id="portfolioTableBody">
                            <!-- Will be populated by JavaScript -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <!-- Watchlist Section -->
        <div class="dashboard-section" id="watchlist-section">
            <div class="dashboard-card">
                <div class="card-header">
                    <h5><i class="fas fa-eye me-2"></i>Watchlist</h5>
                    <div class="card-actions">
                        <button class="btn btn-sm btn-outline-primary" data-bs-toggle="modal" data-bs-target="#addStockModal">
                            <i class="fas fa-plus me-1"></i>Add Stock
                        </button>
                    </div>
                </div>
                <div class="card-body">
                    <div class="table-responsive">
                        <table class="table table-hover" id="watchlistTable">
                            <thead>
                            <tr>
                                <th>Symbol</th>
                                <th>Company</th>
                                <th>Price</th>
                                <th>Change</th>
                                <th>%</th>
                                <th>Volume</th>
                                <th>Alert</th>
                                <th>Actions</th>
                            </tr>
                            </thead>
                            <tbody id="watchlistTableBody">
                            <!-- Will be populated by JavaScript -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <!-- News Section -->
        <div class="dashboard-section" id="news-section">
            <div class="dashboard-card">
                <div class="card-header">
                    <h5><i class="fas fa-newspaper me-2"></i>Market News</h5>
                    <div class="card-actions">
                        <button class="btn btn-sm btn-outline-primary" id="refreshNewsBtn">
                            <i class="fas fa-sync me-1"></i>Refresh
                        </button>
                    </div>
                </div>
                <div class="card-body">
                    <div class="news-container" id="newsContainer">
                        <!-- Will be populated by JavaScript -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Alerts Section -->
        <div class="dashboard-section" id="alerts-section">
            <div class="dashboard-card">
                <div class="card-header">
                    <h5><i class="fas fa-bell me-2"></i>Price Alerts</h5>
                    <div class="card-actions">
                        <button class="btn btn-sm btn-outline-primary" data-bs-toggle="modal" data-bs-target="#addAlertModal">
                            <i class="fas fa-plus me-1"></i>Add Alert
                        </button>
                    </div>
                </div>
                <div class="card-body">
                    <div class="table-responsive">
                        <table class="table table-hover" id="alertsTable">
                            <thead>
                            <tr>
                                <th>Symbol</th>
                                <th>Current Price</th>
                                <th>Alert Price</th>
                                <th>Condition</th>
                                <th>Status</th>
                                <th>Created</th>
                                <th>Actions</th>
                            </tr>
                            </thead>
                            <tbody id="alertsTableBody">
                            <!-- Will be populated by JavaScript -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Modals -->
<!-- Add Stock Modal -->
<div class="modal fade" id="addStockModal" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Add Stock to Watchlist</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <form id="addStockForm">
                    <div class="mb-3">
                        <label for="stockSymbol" class="form-label">Stock Symbol</label>
                        <input type="text" class="form-control" id="stockSymbol" placeholder="e.g., AAPL" required>
                    </div>
                    <div class="mb-3">
                        <label for="stockNotes" class="form-label">Notes (Optional)</label>
                        <textarea class="form-control" id="stockNotes" rows="3"></textarea>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-primary" id="addStockBtn">Add Stock</button>
            </div>
        </div>
    </div>
</div>

<!-- Add Alert Modal -->
<div class="modal fade" id="addAlertModal" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Create Price Alert</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <form id="addAlertForm">
                    <div class="mb-3">
                        <label for="alertSymbol" class="form-label">Stock Symbol</label>
                        <input type="text" class="form-control" id="alertSymbol" placeholder="e.g., AAPL" required>
                    </div>
                    <div class="mb-3">
                        <label for="alertPrice" class="form-label">Alert Price</label>
                        <input type="number" class="form-control" id="alertPrice" step="0.01" required>
                    </div>
                    <div class="mb-3">
                        <label for="alertCondition" class="form-label">Condition</label>
                        <select class="form-select" id="alertCondition" required>
                            <option value="">Select condition</option>
                            <option value="above">Above</option>
                            <option value="below">Below</option>
                        </select>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-primary" id="addAlertBtn">Create Alert</button>
            </div>
        </div>
    </div>
</div>

<!-- Profile Modal -->
<div class="modal fade" id="profileModal" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">User Profile</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <form id="profileForm">
                    <div class="mb-3">
                        <label for="profileEmail" class="form-label">Email</label>
                        <input type="email" class="form-control" id="profileEmail" readonly>
                    </div>
                    <div class="mb-3">
                        <label for="profileUsername" class="form-label">Username</label>
                        <input type="text" class="form-control" id="profileUsername" required>
                    </div>
                    <div class="mb-3">
                        <label for="profileFirstName" class="form-label">First Name</label>
                        <input type="text" class="form-control" id="profileFirstName">
                    </div>
                    <div class="mb-3">
                        <label for="profileLastName" class="form-label">Last Name</label>
                        <input type="text" class="form-control" id="profileLastName">
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-primary" id="saveProfileBtn">Save Changes</button>
            </div>
        </div>
    </div>
</div>

<!-- Settings Modal -->
<div class="modal fade" id="settingsModal" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Settings</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <div class="mb-3">
                    <label class="form-label">Theme</label>
                    <select class="form-select" id="themeSelect">
                        <option value="dark">Dark</option>
                        <option value="light">Light</option>
                    </select>
                </div>
                <div class="mb-3">
                    <label class="form-label">Auto-refresh interval</label>
                    <select class="form-select" id="refreshInterval">
                        <option value="30">30 seconds</option>
                        <option value="60">1 minute</option>
                        <option value="300">5 minutes</option>
                        <option value="600">10 minutes</option>
                    </select>
                </div>
                <div class="mb-3">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="soundNotifications">
                        <label class="form-check-label" for="soundNotifications">
                            Sound notifications
                        </label>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-primary" id="saveSettingsBtn">Save Settings</button>
            </div>
        </div>
    </div>
</div>

<!-- Loading Overlay -->
<div class="loading-overlay" id="loadingOverlay">
    <div class="loading-spinner">
        <div class="spinner-border text-primary" role="status">
            <span class="visually-hidden">Loading...</span>
        </div>
        <p class="loading-text">Loading dashboard...</p>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="../js/dashboard.js"></script>
</body>
</html>